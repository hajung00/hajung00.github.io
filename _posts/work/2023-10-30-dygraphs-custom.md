---
title: Dygraphs ì»¤ìŠ¤í…€
author: cotes
date: 2023-10-30 00:34:00 +0800
categories: [Work-Devlog, ë‡ŒíŒŒ ë¶„ì„ ì‹œìŠ¤í…œ]
tags: [Work-Devlog, Dygraphs, Custom]
---

<!-- í”„ë¡œì íŠ¸ ì‘ì—…í•˜ë©´ì„œ í–ˆë˜ ê³ ë¯¼, ì–´ë–»ê²Œ í•´ê²°í–ˆëŠ”ì§€ì— ëŒ€í•œ ë‚´ìš©ì´ ë‹´ê²¨ì ¸ìˆìŠµë‹ˆë‹¤. -->

> ## Dygraphs ê¸°ì¡´ ê¸°ëŠ¥

1. ë“œë˜ê·¸ ì‹¤ì‹œê°„ ê¸°ëŠ¥
2. Zoom ê¸°ëŠ¥
3. yì¶• ë“œë˜ê·¸, Zoom ê¸°ëŠ¥

_[Dygraphs ê³µì‹ ë¬¸ì„œ ì°¸ì¡°](https://dygraphs.com/)_
![dygraphsê¸°ë³¸-ê¸°ëŠ¥_1](https://github.com/hajung00/React-Sleact/assets/66300154/b738ab0a-6ce1-4d32-86a6-e85f38a864ba)

<br/>

---

<br/>

> ## ğŸ“Œ ê¸°ëŠ¥1) êµ¬ê°„ ì„ íƒ

- ì¡°ê±´

  - ì¡°ê±´ 1) ê°™ì€ ì§€ì  í´ë¦­ ì‹œ, êµ¬ê°„ìœ¼ë¡œ ì¶”ê°€í•˜ì§€ ì•ŠìŒ(mousedown === mouseup)
  - ì¡°ê±´ 2) ê¸°ì¡´ì— ì„ íƒí•œ êµ¬ê°„ì˜ ì¡°ì •
  - ì¡°ê±´ 3) ê¸°ì¡´ì— ì„ íƒí•œ êµ¬ê°„ì„ ìƒˆë¡œ ì„ íƒí•œ êµ¬ê°„ì´ í¬í•¨í•œë‹¤ë©´ í¬í•¨í•˜ëŠ” ë²”ìœ„ë¡œ ë³€ê²½
  - ì¡°ê±´ 4) ê¸°ì¡´ì— ì„ íƒí•œ êµ¬ê°„ì˜ ì¤‘ê°„ê°’ì„ ì„ íƒí•˜ì§€ ëª»í•˜ë„ë¡ ì„¤ì •

<br/>

- ì „ì²´ì ì¸ flow

  1.  Zoomê¸°ëŠ¥ ì œê±°
  2.  ì„ íƒí•œ êµ¬ê°„ allConentì— ì €ì¥

      - ìœ„ì˜ ì¡°ê±´ì— ë§Œì¡±í•˜ì§€ ì•Šê³  ìƒˆë¡œìš´ êµ¬ê°„ì˜ ì¶”ê°€ ì‹œ, allContentì— ì €ì¥

  3.  ì„ íƒí•œ êµ¬ê°„ í™”ë©´ì— í‘œì‹œ

      - allContentì— ì¶”ê°€ë˜ëŠ” ê²½ìš°ì—ë§Œ í™”ë©´ì— í‘œì‹œí•œë‹¤.
      - mousedownì˜ ì§€ì ì— lineê·¸ë¦¬ê³ , mouseupì˜ ì§€ì ì— ë¼ì¸ì„ ê·¸ë¦¬ê³  ëì ê³¼ ì‹œì‘ì ì˜ ì°¨ì´ë¥¼ fillRectë¡œ ì±„ì›Œì¤€ë‹¤.

<br/>

- ğŸ–¥ï¸ êµ¬ê°„ ì„ íƒ ì‹œì—° ì˜ìƒ

  ![êµ¬ê°„ ì„ íƒ ì‹œì—° ì˜ìƒ](https://github.com/hajung00/React-Sleact/assets/66300154/ad469d04-bda6-4ce7-aa95-8e01dfcda689)

### Case1) ê°™ì€ ì§€ì  í´ë¦­ ì‹œ, í™”ë©´ì— í‘œì‹œ X

- mouseupì‹œ, ì‹œì‘ê³¼ ëì  ë¹„êµí•˜ì—¬ ê°™ì€ ê°’ì¸ì§€ íŒë³„ í›„ ê°™ì„ ê²½ìš° allContentì— ì¶”ê°€í•˜ì§€ ì•Šì•„ í™”ë©´ì— í‘œì‹œ ì•ˆë¨.

ğŸ–¥ï¸ ê°™ì€ ì§€ì  ì„ íƒ ì‹œì—° ì˜ìƒ

![ê°™ì€ ì§€ì  í´ë¦­](https://github.com/hajung00/React-Sleact/assets/66300154/92de397f-26ea-4ff7-ae49-be30a69afaa4)

### Case2) ê¸°ì¡´ì— ì„ íƒí•œ êµ¬ê°„ì˜ ì‹œì‘, ë ì§€ì  ì¡°ì •ì¼ ê²½ìš°

- flow

  1.  mousedownì‹œ, ì–´ë–¤ contentë¥¼ ì¡°ì •í•˜ëŠ”ì§€ currentConentì— ì €ì¥

  2.  mousedownì‹œ, ì‹œì‘ì ì¸ì§€ ëì ì˜ ì¡°ì •ì¸ì§€ ë°©í–¥ì„ sectionDirectionì— ì €ì¥ (ì‹œì‘ì  = front, ëì  = back)

  3.  mouseupì‹œ, setcitonDirectionì— ë”°ë¼ ì‹œì‘/ë ì , í¬í•¨í•˜ëŠ” êµ¬ê°„ ë‹¤ì‹œ ê·¸ë ¤ì¤Œ

      - case1) ì‹œì‘ ì ì„ ì¡°ì •í•  ê²½ìš° currentContent ë‹¤ ì§€ìš°ê³  ìƒˆë¡­ê²Œ mouseupí•œ ë¶€ë¶„ì„ ì‹œì‘ì ìœ¼ë¡œ ì¡ê³  ê·¸ë ¤ì¤€ë‹¤.
      - case2) ë ì ì„ ì¡°ì •í•  ê²½ìš° currentContent ë‹¤ ì§€ìš°ê³  ìƒˆë¡­ê²Œ mouseupí•œ ë¶€ë¶„ì„ ëì ìœ¼ë¡œ ì¡ê³  ê·¸ë ¤ì¤€ë‹¤.

  4.  mouseupì‹œ, allContentì—ì„œ í•´ë‹¹ contentì˜ startX, endX ê°’ ë³€ê²½í•´ì¤Œ

ğŸ–¥ï¸ êµ¬ê°„ ì¡°ì • ì‹œì—° ì˜ìƒ

![êµ¬ê°„ ì¡°ì •](https://github.com/hajung00/React-Sleact/assets/66300154/e06126a0-2c71-4c0a-856e-1a9b284002a7)

### Case3) ê¸°ì¡´ êµ¬ê°„ì„ ìƒˆë¡œ ì„ íƒí•œ êµ¬ê°„ì´ í¬í•¨í•˜ëŠ” ê²½ìš°

1. mouseupì‹œ, í´ë¦­í•œ ì§€ì ì´ allContentì˜ contentì— ì™„ì „íˆ í¬í•¨ë˜ëŠ” ê²½ìš°

   - if (ìƒˆë¡œìš´ ì‹œì‘ì < contentì˜ ì‹œì‘ì  && contentì˜ ëì < ìƒˆë¡œìš´ ëì )

2. ê¸°ì¡´ contentì˜ êµ¬ê°„ ì§€ìš°ê³ , allContentì—ì„œ ì œê±°

3. ìƒˆë¡œ ì„ íƒí•œ êµ¬ê°„ allContentì— push

ğŸ–¥ï¸ êµ¬ê°„ í¬í•¨ ì‹œì—° ì˜ìƒ

![êµ¬ê°„ í¬í•¨](https://github.com/hajung00/React-Sleact/assets/66300154/3d5f2d48-92d9-414f-b2af-dd00cc2e438e)

### Case4) ì´ë¯¸ ì„ íƒëœ êµ¬ê°„ì˜ ì¤‘ê°„ê°’ì„ ì„ íƒí•  ê²½ìš°

- mousedownì‹œ, í´ë¦­í•œ ì§€ì ì´ allContentì˜ í•˜ë‚˜ì˜ contentì— í¬í•¨ë˜ëŠ”(ì¤‘ê°„ê°’) ê²½ìš° ê°’ ì¶”ê°€ X, í™”ë©´ì— ê·¸ë¦¬ëŠ” ë¶€ë¶„ ì‹¤í–‰ë˜ì§€ ì•Šë„ë¡ ì„¤ì •

ğŸ–¥ï¸ ì¤‘ê°„ê°’ ì„ íƒ ì‹œì—° ì˜ìƒ

![ì¤‘ê°„ê°’ ì„ íƒ](https://github.com/hajung00/React-Sleact/assets/66300154/6744fddd-54d8-4fde-9d09-01d887f61b52)

<br/>

---

<br/>

> ## ğŸ“Œ ê¸°ëŠ¥2) ìš°í´ë¦­ ì‹œ, ì„ íƒí•œ êµ¬ê°„ ì‚­ì œ

1. mousedownì‹œ, ìš°í´ë¦­ì¼ê²½ìš°, deleteCheckpointì‹¤í–‰
2. ì‚­ì œí•  êµ¬ê°„ì„ ì°¾ì•„ allContentì—ì„œ ì œê±°
3. ì‚­ì œí•œ êµ¬ê°„ í™”ë©´ì—ì„œ ì œê±°

ğŸ–¥ï¸ ì„ íƒí•œ êµ¬ê°„ ì‚­ì œ ì‹œì—° ì˜ìƒ

![ì„ íƒí•œ êµ¬ê°„ ì‚­ì œ](https://github.com/hajung00/React-Sleact/assets/66300154/67a19cf8-9dd6-4c02-a147-ce131ef5fc72)

<br/>

---

<br/>

> ## ğŸ“Œ ê¸°ëŠ¥3) xì¶• ->ì‹œê°„, yì¶• -> ì±„ë„ ì´ë¦„

1. ticks ì„¤ì •í•˜ëŠ” ë¶€ë¶„ì—ì„œ xì¶• samplingrateë§Œí¼ ë‚˜ëˆ„ê¸°

```javascript
this.xticks.push({
  pos: pos,
  label: Math.floor(label / 60) + "s",
  has_tick: has_tick
});
```

2. ticks ì„¤ì •í•˜ëŠ” ë¶€ë¶„ì—ì„œ yì¶• ì±„ë„ ì´ë¦„ìœ¼ë¡œ ë³€ê²½

- ê¸°ì¡´ì—ëŠ” ê·¸ë˜í”„ì˜ ìµœëŒ€ê°’ê³¼ ìµœì†Ÿê°’ ì‚¬ì´ì—ì„œ yë¥¼ ë‚˜íƒ€ëƒˆìœ¼ë©´, yì¶• ë‚˜íƒ€ë‚´ëŠ” ë²”ìœ„ë¥¼ ìµœëŒ“ê°’ìœ¼ë¡œ ë§ì¶˜ë‹¤.

```javascript
pct = (yRange[1] - y) / yRange[1];
```

- yì¶• ë‚˜íƒ€ë‚´ëŠ” ë²”ìœ„ë¥¼ ì±„ë„ ìˆ˜ ë§Œí¼ ë‚˜ëˆ ì„œ ìœ„ì¹˜ ì§€ì •

```javascript
const distance = axis.computedValueRange[1] / channel.length;
const ticksChannel = channel.map((item, i) => {
  var obj = {};
  obj["v"] = i * distance;
  obj["label"] = item;
  return obj;
});
```

[ì ìš© í™”ë©´]
![image](https://github.com/hajung00/SidePJ-next-node-full-sns/assets/66300154/eda7424c-f3cc-4db5-88bc-b437fc73e8e3)
