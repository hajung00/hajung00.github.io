---
title: ë²ˆë“¤ ìš©ëŸ‰ ì´ˆê³¼(ë°°í¬ ì—ëŸ¬)_Amplify
author: cotes
date: 2023-10-08 00:34:00 +0800
categories: [Work-Devlog, ë‡ŒíŒŒ ë¶„ì„ ì‹œìŠ¤í…œ]
tags: [Work-Devlog, AWS, Amplify, bundle-analyzer, ì—ëŸ¬ í•´ê²°]
---

<!-- í”„ë¡œì íŠ¸ ì‘ì—…í•˜ë©´ì„œ í–ˆë˜ ê³ ë¯¼, ì–´ë–»ê²Œ í•´ê²°í–ˆëŠ”ì§€ì— ëŒ€í•œ ë‚´ìš©ì´ ë‹´ê²¨ì ¸ìˆìŠµë‹ˆë‹¤. -->

> ### Amplifyë€?

_"í”„ëŸ°íŠ¸ì—”ë“œ ì›¹ ë° ëª¨ë°”ì¼ ê°œë°œìê°€ ë‹¤ì–‘í•œ AWS ì„œë¹„ìŠ¤ë¥¼ í™œìš©í•˜ëŠ” ìœ ì—°ì„±ì„ ë°”íƒ•ìœ¼ë¡œ AWSì— í’€ ìŠ¤íƒ ì• í”Œë¦¬ì¼€ì´ì…˜ì„ ì†ì‰½ê²Œ êµ¬ì¶•, ë°°ì†¡ ë° í˜¸ìŠ¤íŒ…í•  ìˆ˜ ìˆë„ë¡ ì§€ì›í•˜ëŠ” ì™„ì „í•œ ì†”ë£¨ì…˜ì…ë‹ˆë‹¤. "_

ê°„ë‹¨í•˜ê²Œ ë§í•´ì„œ **AWSì—ì„œ ì œê³µí•˜ëŠ” ë°°í¬ ìë™í™” ì‹œìŠ¤í…œ**ì´ë¼ê³  í•  ìˆ˜ ìˆë‹¤.

<br/>

---

<br/>

> ### ì‚¬ìš©Â ë°©ë²•

amplify ì„¸íŒ…ì€ ì™„ë£Œëœ ìƒíƒœì˜€ê³  **pullì„ í†µí•´ ì†ŒìŠ¤ì½”ë“œë§Œ repositoryì—ì„œ ë°›ì€ í›„ì— amplify ì ‘ì†**ì„ ì‹œë„í•˜ë©´ ë˜ì—ˆë‹¤.

#### 1. amplify cli ì„¤ì¹˜

```
curl -sL https://aws-amplify.github.io/amplify-cli/install-win -o install.cmd &amp;&amp; install.cmd

```

#### 2. workspaceë¡œ ì´ë™ í›„ amplify pull

![image](https://github.com/hajung00/SidePJ-next-node-full-sns/assets/66300154/bc6514e8-3fcf-4dce-a565-faa94ffa8408)

#### 3. aws access keys ì…ë ¥

ì œê³µë°›ì€ **Access key IDì™€ Secret access key ì…ë ¥**

#### 4. ì†ì„± ì„¤ì •

region, amplify í”„ë¡œì íŠ¸, editor, ì–¸ì–´, í”„ë ˆì„ì›Œí¬ ë“± ì†ì„± ì„¤ì •

â— **Distribution Directory PathëŠ” .nextë¡œ ë³€ê²½** â—

![image](https://github.com/hajung00/SidePJ-next-node-full-sns/assets/66300154/06a005bb-0420-47d1-b41e-c2f7aa1d6f0e)

<br/>

---

<br/>

> ### â— ë¬¸ì œ ìƒí™©

ìœ„ì˜ ì„¤ì •ëŒ€ë¡œ amplifyë¡œ ë°°í¬í•˜ì—¬ ì‚¬ìš©í•˜ë˜ ì¤‘ **ì—ëŸ¬ê°€ ë°œìƒí•˜ì—¬ ì—…ë°ì´íŠ¸ ë‚´ìš©ì´ ë°°í¬ ì‚¬ì´íŠ¸ì— ë°˜ì˜ë˜ì§€ ì•ŠìŒ**.

ë¹Œë“œê³¼ì •ì—ì„œ ì—ëŸ¬ê°€ ë°œìƒí•˜ì˜€ê³ , ì—ëŸ¬ ë‚´ìš©ì„ ê²€ìƒ‰í•´ ë³¸ ê²°ê³¼ **ë²ˆë“¤ ìš©ëŸ‰ ì´ˆê³¼**ë¡œ ë°œìƒí•œë‹¤ê³  í•˜ì˜€ë‹¤.

<br/>

í”„ë¡œì íŠ¸ëŠ” nextjsë¥¼ ì‚¬ìš©í•˜ê³  ìˆê³  ê¸°ë³¸ì ìœ¼ë¡œ ì½”ë“œìŠ¤í”Œë¦¬íŒ…ì„ ì§€ì›í•´ í˜ì´ì§€ë³„ë¡œ í•„ìš”í•œ ìŠ¤í¬ë¦½íŠ¸ë§Œ ë²ˆë“¤ë§í•˜ê²Œ ëœë‹¤. <br/>

í•˜ì§€ë§Œ **ë¶ˆí•„ìš”í•œ ìŠ¤í¬ë¦½íŠ¸ê°€ ê°™ì´ ë²ˆë“¤ë§**ë˜ëŠ” ì¼ì´ ìˆì–´ ë”°ë¡œ **ìµœì í™”**í•  ìˆ˜ ìˆë‹¤ë©´ í•˜ëŠ” ê²ƒì´ ì¢‹ë‹¤.

<br/>

@next/bundle-analyzerë¥¼ í†µí•´ ê° ëª¨ë“ˆì˜ ë²ˆë“¤ ì‚¬ì´ì¦ˆë¥¼ ì¸¡ì •í•˜ê³  ìµœì í™” í•´ë³´ì•˜ë‹¤.

- ë¶ˆí•„ìš”í•œ ìŠ¤í¬ë¦½íŠ¸ ì¤„ì´ê¸°

  - ë¶ˆí•„ìš”í•œ ëª¨ë“ˆ ì‚­ì œ

  - Code Splitting

<br/>

---

<br/>

> ### ğŸ’¡ ë¬¸ì œ í•´ê²°(with. bundle-analyzer)

#### bundle-analyzerë€?

_**ë²ˆë“¤ íŒŒì¼ì´ ì–´ë–»ê²Œ êµ¬ì„±**ë˜ì—ˆëŠ”ì§€ ì‰½ê²Œ íŒŒì•…í•˜ê²Œ í•´ì£¼ëŠ” ì‹œê°í™” ë„êµ¬_

#### ì‚¬ìš© ë°©ë²•

##### 1. ì„¤ì¹˜

```
 $ npm i -D @next/bundle-analyzer
```

##### 2. next.config.js

```javascript
const withBundleAnalyzer = require("@next/bundle-analyzer")({
  enabled: true,
  openAnalyzer: true
});
```

##### 3. package.jonì— ìŠ¤í¬ë¦½íŠ¸ ëª…ë ¹ì–´ ì¶”ê°€

```
"analyze": "cross-env ANALYZE=true next build"
```

##### 4. analyze ì‹¤í–‰

ì•„ë˜ ê·¸ë¦¼ì—ì„œ ë³¼ ìˆ˜ ìˆë“¯ì´ **React-pdf/renderÂ ì—ì„œÂ ë§ì€Â ë¶€ë¶„Â ì°¨ì§€**

- React-pdf/renderëŠ” ë‡ŒíŒŒ ë¶„ì„ ê²°ê³¼ì§€ pdfë¥¼ ìƒì„±í•˜ê¸° ìœ„í•´ ì‚¬ìš©

<img src="https://github.com/hajung00/SidePJ-next-node-full-sns/assets/66300154/55d404d6-9305-43a4-9793-6a6a4bd5e5b3" width="80%" height="50%" alt="image"/>

##### 5.Â ë²ˆë“¤Â sizeÂ í™•ì¸

bundle-analyzerì—ì„œ í™•ì¸í–ˆë˜ ê²ƒ ì²˜ëŸ¼ **React-pdf/renderê°€ ì‚¬ìš©ë˜ëŠ” í˜ì´ì§€ì˜ ë²ˆë“¤ ì‚¬ì´ì¦ˆê°€ í° ê²ƒì„ í™•ì¸**

- React-pdf/renderë¼ì´ë¸ŒëŸ¬ë¦¬ë¥¼Â ì‚¬ìš©í•˜ëŠ”Â ì»´í¬ë„ŒíŠ¸Â =>Â ReportLayout

- **ReportLayoutÂ ì»´í¬ë„ŒíŠ¸ë¥¼Â ì‚¬ìš©í•˜ëŠ”Â í˜ì´ì§€Â =>Â report,Â reportDetail**

<img src="https://github.com/hajung00/SidePJ-next-node-full-sns/assets/66300154/f3e14864-5751-4f3d-84f1-1421fcbca7ae" width="80%" height="50%" alt="image"/>

#### ğŸ’¡í•´ê²° ë°©ë²• 1. ë¶ˆí•„ìš”í•œ ëª¨ë“ˆ ì‚­ì œ

ê¸°ì¡´ì— ì„¤ì¹˜í•˜ê³  ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ëª¨ë“ˆì„ ëª¨ë‘ ì‚­ì œí•˜ê³  import í•˜ê³  ì‚¬ìš©í•˜ì§€ ì•Šì•˜ë˜ ëª¨ë“ˆë„ ëª¨ë‘ ì œê±°í•´ ì£¼ì—ˆë‹¤.

#### ğŸ’¡í•´ê²° ë°©ë²• 2. Code Splitting

- í•˜ë‚˜ë¡œÂ í•©ì³ì§„Â **ë²ˆë“¤Â íŒŒì¼ì„Â ì—¬ëŸ¬Â ì¡°ê°ìœ¼ë¡œÂ ë¶„ë¦¬í•´Â í•„ìš”í• Â ë•Œë§ŒÂ ë”°ë¡œÂ ë¡œë“œ**í•˜ê¸°Â ìœ„í•´Â ì‚¬ìš©

- **í˜ì´ì§€Â ì´ˆê¸°Â ë¡œë“œÂ ì‹œÂ í•„ìš”í•˜ì§€Â ì•Šì€Â ì»´í¬ë„ŒíŠ¸**(ex.Â ìœ ì €ì™€Â í˜ì´ì§€ê°€Â ìƒí˜¸Â ì‘ìš©í•œÂ í›„ì—Â ë‚˜íƒ€ë‚˜ëŠ”Â ëª¨ë‹¬Â ì»´í¬ë„ŒíŠ¸)ëŠ”Â dynamicÂ importë¥¼Â ì‚¬ìš©í•´Â **ì½”ë“œÂ ìŠ¤í”Œë¦¬íŒ…ì„Â ì ìš©**

- **reportí˜ì´ì§€**ì—ì„œëŠ” ì‚¬ìš©ìê°€ ì„ íƒí•œ íŒŒì¼ì— ëŒ€í•œ ê²°ê³¼ì§€ pdfê°€ ë³´ì—¬ì§€ëŠ” ê²ƒì´ë¯€ë¡œ **pdfìƒì„± ì»´í¬ë„ŒíŠ¸(ReportLayout)ë¥¼ ì½”ë“œ ìŠ¤í”Œë¦¬íŒ… ì ìš©**

![ê·¸ë¦¼3](https://github.com/hajung00/SidePJ-next-node-full-sns/assets/66300154/2463d7c6-f3aa-4b2d-9491-ff8d0e863291)

- Code Splitting ë°©ë²•

  - reportí˜ì´ì§€ì—ì„œ **ReportLayoutë¥¼ importí•  ë•Œ ì½”ë“œ ìŠ¤í”Œë¦¬íŒ…** ì ìš©

```javascript
import dynamic from "next/dynamic";
const ReportLayout = dynamic(() => import("./_app/ReportLayout"));
```

<br/>

---

<br/>

> ### ğŸ’¡ ë¬¸ì œ í•´ê²° í™•ì¸

| Code Splitting ì „                                                                                                    | Code Splitting í›„                                                                                                    |
| -------------------------------------------------------------------------------------------------------------------- | -------------------------------------------------------------------------------------------------------------------- |
| ![image](https://github.com/hajung00/SidePJ-next-node-full-sns/assets/66300154/29c7094b-ca1c-49c2-90b8-e216528e4d53) | ![image](https://github.com/hajung00/SidePJ-next-node-full-sns/assets/66300154/36f223bc-9892-4eb6-9dd1-f772077bb3f9) |

<br/>

**Code Splitting ì „ build**
<img src="https://github.com/hajung00/SidePJ-next-node-full-sns/assets/66300154/44d9eb0c-6e4b-488d-9721-988f6f20c4fc" width="80%" height="50%" alt="image"/>

<br/>

**Code Splitting í›„ build**
<img src="https://github.com/hajung00/SidePJ-next-node-full-sns/assets/66300154/ef260313-5414-4ec0-8061-179604570147" width="80%" height="50%" alt="image"/>

<br/>

---

<br/>

> ### ğŸ“‘ ì°¸ê³  ìë£Œ

[AWS Amplifyë¡œ next í”„ë¡œì íŠ¸ ë°°í¬í•˜ê¸°(SSR)](https://velog.io/@mimi0905/AWS-Amplify%EB%A1%9C-next-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8-%EB%B0%B0%ED%8F%AC%ED%95%98%EA%B8%B0SSR#amplify-cli-%EC%84%A4%EC%B9%98)

[aws amplify ê¸°ëŠ¥ ì •ë¦¬](https://java8.tistory.com/485)

[[nextjs] bundle-analyzerë¥¼ ì‚¬ìš©í•œ ìµœì í™” ì¼ê¸°](https://velog.io/@pds0309/nextjs-bundle-analyzer%EB%A5%BC-%EC%82%AC%EC%9A%A9%ED%95%9C-%EC%B5%9C%EC%A0%81%ED%99%94-%EC%9D%BC%EA%B8%B0)
